import{t as Y,b as V}from"../chunks/CYEf1Ylp.js";import{aF as pe,S as me,az as he,h as ye,af as ge,aB as C,ah as H,g as h,ai as be,aj as R,al as N,ak as T,X as m}from"../chunks/CfeyyWgh.js";import{l as Ee,e as we,s as j}from"../chunks/CJ7GsXyi.js";import{i as _e}from"../chunks/CB-ywmT0.js";import{r as D}from"../chunks/CS4I8XOw.js";import{s as ve}from"../chunks/BsO-XIOf.js";function k(e,t,r=t){var n=pe();Ee(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=P(e)?U(o):o,r(o),n&&o!==(o=t())){var a=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(i,e.value.length))}}),(ye&&e.defaultValue!==e.value||me(t)==null&&e.value)&&r(P(e)?U(e.value):e.value),he(()=>{var s=t();P(e)&&s===U(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function P(e){var t=e.type;return t==="number"||t==="range"}function U(e){return e===""?null:+e}function Se({data:e}){return e}const yt=Object.freeze(Object.defineProperty({__proto__:null,load:Se},Symbol.toStringTag,{value:"Module"})),O="GraphQL Client",M=0,K=3,J="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",W="Response returned unexpected Content-Type:",z="An unknown error has occurred. The API did not return a data object or any errors in its response.",F={json:"application/json",multipart:"multipart/mixed"},q="X-SDK-Variant",Q="X-SDK-Version",Ae="shopify-graphql-client",Re="1.4.1",Z=1e3,Te=[429,503],ee=/@(defer)\b/i,G=`\r
`,Ce=/boundary="?([^=";]+)"?/i,X=G+G;function S(e,t=O){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function x(e){return e instanceof Error?e.message:JSON.stringify(e)}function te(e){return e instanceof Error&&e.cause?e.cause:void 0}function re(e){return e.flatMap(({errors:t})=>t??[])}function ne({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<M||t>K))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${M} or greater than ${K}`)}function y(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function se(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:se(e,n)}function oe(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=oe(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function ae([e,...t]){return t.reduce(oe,{...e})}function xe({clientLogger:e,customFetchApi:t=fetch,client:r=O,defaultRetryWaitTime:n=Z,retriableCodes:s=Te}){const o=async(a,i,c)=>{const l=i+1,f=c+1;let u;try{if(u=await t(...a),e({type:"HTTP-Response",content:{requestParams:a,response:u}}),!u.ok&&s.includes(u.status)&&l<=f)throw new Error;const d=(u==null?void 0:u.headers.get("X-Shopify-API-Deprecated-Reason"))||"";return d&&e({type:"HTTP-Response-GraphQL-Deprecation-Notice",content:{requestParams:a,deprecationNotice:d}}),u}catch(d){if(l<=f){const p=u==null?void 0:u.headers.get("Retry-After");return await Ne(p?parseInt(p,10):n),e({type:"HTTP-Retry",content:{requestParams:a,lastResponse:u,retryAttempt:i,maxRetries:c}}),o(a,l,c)}throw new Error(S(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${x(d)}`,r))}};return o}async function Ne(e){return new Promise(t=>setTimeout(t,e))}function Ie({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:s}){ne({client:O,retries:n});const o={headers:e,url:t,retries:n},a=$e(s),i=xe({customFetchApi:r,clientLogger:a,defaultRetryWaitTime:Z}),c=Oe(i,o),l=De(c),f=He(c);return{config:o,fetch:c,request:l,requestStream:f}}function $e(e){return t=>{e&&e(t)}}async function ie(e){const{errors:t,data:r,extensions:n}=await e.json();return{...y("data",r),...y("extensions",n),headers:e.headers,...t||!r?{errors:{networkStatusCode:e.status,message:S(t?J:z),...y("graphQLErrors",t),response:e}}:{}}}function Oe(e,{url:t,headers:r,retries:n}){return async(s,o={})=>{const{variables:a,headers:i,url:c,retries:l,keepalive:f,signal:u}=o,d=JSON.stringify({query:s,variables:a});ne({client:O,retries:l});const p=Object.entries({...r,...i}).reduce((E,[w,v])=>(E[w]=Array.isArray(v)?v.join(", "):v.toString(),E),{});return!p[q]&&!p[Q]&&(p[q]=Ae,p[Q]=Re),e([c??t,{method:"POST",headers:p,body:d,signal:u,keepalive:f}],1,l??n)}}function De(e){return async(...t)=>{if(ee.test(t[0]))throw new Error(S("This operation will result in a streamable response - use requestStream() instead."));let r=null;try{r=await e(...t);const{status:n,statusText:s}=r,o=r.headers.get("content-type")||"";return r.ok?o.includes(F.json)?await ie(r):{errors:{networkStatusCode:n,message:S(`${W} ${o}`),response:r}}:{errors:{networkStatusCode:n,message:S(s),response:r}}}catch(n){return{errors:{message:x(n),...r==null?{}:{networkStatusCode:r.status,response:r}}}}}}async function*ke(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function Pe(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const s=r.lastIndexOf(t),a=r.slice(0,s).split(t).filter(i=>i.trim().length>0).map(i=>i.slice(i.indexOf(X)+X.length).trim());a.length>0&&(yield a),r=r.slice(s+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${x(r)}`)}}}}function Ue(e){return{async*[Symbol.asyncIterator](){yield{...await ie(e),hasNext:!1}}}}function Le(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${x(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:s,extensions:o,errors:a}=t;if(!n)return{data:r||{},...y("errors",a),...y("extensions",o),hasNext:s};const i=n.map(({data:c,path:l,errors:f})=>({data:c&&l?se(l,c):{},...y("errors",f)}));return{data:i.length===1?i[0].data:ae([...i.map(({data:c})=>c)]),...y("errors",re(i)),hasNext:s}})}function Fe(e,t){if(e.length>0)throw new Error(J,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(z)}function Ve(e,t){var i,c;const r=(t??"").match(Ce),n=`--${r?r[1]:"-"}`;if(!((i=e.body)!=null&&i.getReader)&&!((c=e.body)!=null&&c[Symbol.asyncIterator]))throw new Error("API multipart response did not return an iterable body",{cause:e});const s=ke(e);let o={},a;return{async*[Symbol.asyncIterator](){var l;try{let f=!0;for await(const u of Pe(s,n)){const d=Le(u);a=((l=d.find(g=>g.extensions))==null?void 0:l.extensions)??a;const p=re(d);o=ae([o,...d.map(({data:g})=>g)]),f=d.slice(-1)[0].hasNext,Fe(p,o),yield{...y("data",o),...y("extensions",a),hasNext:f}}if(f)throw new Error("Response stream terminated unexpectedly")}catch(f){const u=te(f);yield{...y("data",o),...y("extensions",a),errors:{message:S(x(f)),networkStatusCode:e.status,...y("graphQLErrors",u==null?void 0:u.graphQLErrors),response:e},hasNext:!1}}}}}function He(e){return async(...t)=>{if(!ee.test(t[0]))throw new Error(S("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const s=r.headers.get("content-type")||"";switch(!0){case s.includes(F.json):return Ue(r);case s.includes(F.multipart):return Ve(r,s);default:throw new Error(`${W} ${s}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=te(r);yield{errors:{message:S(x(r)),...y("networkStatusCode",n==null?void 0:n.status),...y("response",n)},hasNext:!1}}}}}}function je({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,s=new URL(n);return s.protocol="https",s.origin}catch(r){throw new Error(`${e}: a valid store domain ("${t}") must be provided`,{cause:r})}}function ce({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const s=`${e}: the provided apiVersion ("${r}")`,o=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${s} is invalid. ${o}`);const a=r.trim();t.includes(a)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${s} is likely deprecated or not supported. ${o}`))}function I(e){const t=e*3-2;return t===10?t:`0${t}`}function L(e,t,r){const n=t-r;return n<=0?`${e-1}-${I(n+4)}`:`${e}-${I(n)}`}function Me(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${I(n)}`}}function Ke(){const{year:e,quarter:t,version:r}=Me(),n=t===4?`${e+1}-01`:`${e}-${I(t+1)}`;return[L(e,t,3),L(e,t,2),L(e,t,1),r,n,"unstable"]}function qe(e){return t=>({...t??{},...e.headers})}function Qe({getHeaders:e,getApiUrl:t}){return(r,n)=>{const s=[r];if(n&&Object.keys(n).length>0){const{variables:o,apiVersion:a,headers:i,retries:c,signal:l}=n;s.push({...o?{variables:o}:{},...i?{headers:e(i)}:{},...a?{url:t(a)}:{},...c?{retries:c}:{},...l?{signal:l}:{}})}return s}}const B="application/json",Ge="storefront-api-client",Xe="1.0.9",Be="X-Shopify-Storefront-Access-Token",Ye="X-SDK-Variant",Je="X-SDK-Version",We="X-SDK-Variant-Source",$="Storefront API Client";function ze(e){if(e&&typeof window<"u")throw new Error(`${$}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function Ze(e,t){if(t)throw new Error(`${$}: only provide either a public or private access token`)}function et({storeDomain:e,apiVersion:t,publicAccessToken:r,privateAccessToken:n,clientName:s,retries:o=0,customFetchApi:a,logger:i}){const c=Ke(),l=je({client:$,storeDomain:e}),f={client:$,currentSupportedApiVersions:c,logger:i};ce({...f,apiVersion:t}),Ze(r,n),ze(n);const u=tt(l,t,f),d={storeDomain:l,apiVersion:t,publicAccessToken:r,headers:{"Content-Type":B,Accept:B,[Ye]:Ge,[Je]:Xe,...s?{[We]:s}:{},[Be]:r},apiUrl:u(),clientName:s},p=Ie({headers:d.headers,url:d.apiUrl,retries:o,customFetchApi:a,logger:i}),g=qe(d),E=rt(d,u),w=Qe({getHeaders:g,getApiUrl:E});return Object.freeze({config:d,getHeaders:g,getApiUrl:E,fetch:(...A)=>p.fetch(...w(...A)),request:(...A)=>p.request(...w(...A)),requestStream:(...A)=>p.requestStream(...w(...A))})}function tt(e,t,r){return n=>{n&&ce({...r,apiVersion:n});const s=(n??t).trim();return`${e}/api/${s}/graphql.json`}}function rt(e,t){return r=>r?t(r):e.apiUrl}var ue={};const nt=ue.SHOPIFY_STORE_DOMAIN||"your-store.myshopify.com",st=ue.SHOPIFY_STOREFRONT_ACCESS_TOKEN||"your-storefront-access-token",ot=et({storeDomain:nt,apiVersion:"2024-10",publicAccessToken:st}),at=`
  mutation customerCreate($input: CustomerCreateInput!) {
    customerCreate(input: $input) {
      customer {
        id
        email
        firstName
        lastName
        acceptsMarketing
      }
      customerUserErrors {
        field
        message
        code
      }
    }
  }
`;async function it(e,t="",r=""){try{const{data:n}=await ot.request(at,{variables:{input:{email:e,firstName:t,lastName:r,password:Math.random().toString(36).slice(-12),acceptsMarketing:!0}}});if(n.customerCreate.customerUserErrors.length>0){const s=n.customerCreate.customerUserErrors;if(s.some(o=>o.code==="TAKEN"))return{success:!0,message:"Email already subscribed"};throw new Error(s.map(o=>o.message).join(", "))}return{success:!0,customer:n.customerCreate.customer,message:"Successfully subscribed to newsletter"}}catch(n){return console.error("Newsletter subscription error:",n),{success:!1,error:n.message||"Failed to subscribe to newsletter"}}}var ct=Y("<div> </div>"),ut=Y('<div class="min-h-screen flex items-center justify-center px-4 py-8 bg-gradient-to-br from-blue-50 via-white to-purple-50"><div class="max-w-md w-full"><div class="relative backdrop-blur-lg bg-white/25 border border-white/20 rounded-2xl shadow-xl p-8 text-center"><h1 class="text-3xl font-bold mb-4 text-gray-900">Stay in Touch</h1> <p class="text-gray-700 mb-8">Subscribe to our newsletter for updates and exclusive content.</p> <form class="space-y-4"><div class="space-y-3"><input type="text" placeholder="First Name (optional)" class="w-full px-4 py-3 rounded-lg border border-white/30 bg-white/40 backdrop-blur-sm placeholder-gray-600 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all"> <input type="text" placeholder="Last Name (optional)" class="w-full px-4 py-3 rounded-lg border border-white/30 bg-white/40 backdrop-blur-sm placeholder-gray-600 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all"> <input type="email" placeholder="Enter your email" required class="w-full px-4 py-3 rounded-lg border border-white/30 bg-white/40 backdrop-blur-sm placeholder-gray-600 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all"></div> <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 shadow-lg"> </button></form> <!></div></div></div>');function gt(e,t){ge(t,!0);let r=C(""),n=C(""),s=C(""),o=C(!1),a=C(""),i=C(!1);async function c(b){if(b.preventDefault(),!h(r).trim()){m(a,"Please enter your email address"),m(i,!1);return}m(o,!0),m(a,"");try{const _=await it(h(r).trim(),h(n).trim(),h(s).trim());_.success?(m(a,_.message||"Successfully subscribed to our newsletter!",!0),m(i,!0),m(r,""),m(n,""),m(s,"")):(m(a,_.error||"Failed to subscribe. Please try again.",!0),m(i,!1))}catch{m(a,"Something went wrong. Please try again."),m(i,!1)}finally{m(o,!1)}}var l=ut(),f=R(l),u=R(f),d=N(R(u),4),p=R(d),g=R(p);D(g);var E=N(g,2);D(E);var w=N(E,2);D(w),T(p);var v=N(p,2),A=R(v,!0);T(v),T(d);var le=N(d,2);{var de=b=>{var _=ct(),fe=R(_,!0);T(_),H(()=>{ve(_,1,`mt-4 p-3 rounded-lg backdrop-blur-sm ${(h(i)?"bg-green-100/80 text-green-800 border border-green-200/50":"bg-red-100/80 text-red-800 border border-red-200/50")??""}`),j(fe,h(a))}),V(b,_)};_e(le,b=>{h(a)&&b(de)})}T(u),T(f),T(l),H(()=>{g.disabled=h(o),E.disabled=h(o),w.disabled=h(o),v.disabled=h(o),j(A,h(o)?"Subscribing...":"Subscribe")}),k(g,()=>h(n),b=>m(n,b)),k(E,()=>h(s),b=>m(s,b)),k(w,()=>h(r),b=>m(r,b)),we("submit",d,c),V(e,l),be()}export{gt as component,yt as universal};
